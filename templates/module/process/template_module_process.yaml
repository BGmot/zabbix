zabbix_export:
  version: '6.2'
  date: '2022-09-22T10:40:34Z'
  template_groups:
    -
      uuid: 57b7ae836ca64446ba2c296389c009b7
      name: Templates/Modules
  templates:
    -
      uuid: 0f6889282f6048e2b1370e569e578985
      template: 'OS processes by Zabbix agent'
      name: 'OS processes by Zabbix agent'
      description: |
        Get processes metrics using item proc.get by Zabbix agent.
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback
        
        Template tooling version used: 0.42
      groups:
        -
          name: Templates/Modules
      items:
        -
          uuid: 803390429cf949d3b8439dd5dd71c706
          name: 'OS: Get process summary'
          key: 'proc.get[,,,summary]'
          history: '0'
          trends: '0'
          value_type: TEXT
          description: 'Get all summary procces metrics'
          tags:
            -
              tag: component
              value: raw
      discovery_rules:
        -
          uuid: 7c0e8b719d0e464f92ee42a3da75b682
          name: 'Summary of processes discovery'
          type: DEPENDENT
          key: custom.proc.sum.discovery
          delay: '0'
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#VMEM}'
                value: '-1'
                operator: NOT_MATCHES_REGEX
                formulaid: C
              -
                macro: '{#NAME}'
                value: '{$PROC.SUM.NAME.MATCHES}'
                formulaid: A
              -
                macro: '{#NAME}'
                value: '{$PROC.SUM.NAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'Discovery of summary process OS.'
          item_prototypes:
            -
              uuid: 2e9b31e2b47741f4b35c5d15f33378ea
              name: 'OS: Get process: {#NAME}'
              type: DEPENDENT
              key: 'custom.proc.get[{#NAME}]'
              delay: '0'
              history: 0d
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[?(@["name"]=="{#NAME}")]'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: 'proc.get[,,,summary]'
              tags:
                -
                  tag: component
                  value: raw
            -
              uuid: 822ffda22eb042b89fc50b212aab133f
              name: 'OS: Size of locked memory: {#NAME}'
              type: DEPENDENT
              key: 'custom.proc.lck[{#NAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: B
              description: 'Size of locked memory {#NAME}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $..lck.first()
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'custom.proc.get[{#NAME}]'
              tags:
                -
                  tag: component
                  value: memory
            -
              uuid: 0bb7d924b8814c42a494d8a3baf48a59
              name: 'OS: Number of processes: {#NAME}'
              type: DEPENDENT
              key: 'custom.proc.numb[{#NAME}]'
              delay: '0'
              history: 7d
              description: 'Count process {#NAME}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $..processes.first()
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'custom.proc.get[{#NAME}]'
              tags:
                -
                  tag: component
                  value: system
            -
              uuid: abccdac17c7e4b549fcfe70ceeedeb9b
              name: 'OS: Number of page faults: {#NAME}'
              type: DEPENDENT
              key: 'custom.proc.page[{#NAME}]'
              delay: '0'
              history: 7d
              description: 'Number page faults {#NAME}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $..page_faults.first()
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'custom.proc.get[{#NAME}]'
              tags:
                -
                  tag: component
                  value: system
            -
              uuid: 4ffd202fb6044b819f6f28dc866ca8f1
              name: 'OS: Percentage of real memory: {#NAME}'
              type: DEPENDENT
              key: 'custom.proc.pmem[{#NAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: '%'
              description: 'Percentage of real memory used by process {#NAME}.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $..pmem.first()
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'custom.proc.get[{#NAME}]'
              tags:
                -
                  tag: component
                  value: memory
            -
              uuid: 7e573e38bce04167bc37712c0a3e2194
              name: 'OS: Summary of resident memory size: {#NAME}'
              type: DEPENDENT
              key: 'custom.proc.rss[{#NAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: B
              description: 'Summary resident set size memory used by process {#NAME} in bytes.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $..rss.first()
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'custom.proc.get[{#NAME}]'
              tags:
                -
                  tag: component
                  value: memory
            -
              uuid: 12370d3b25024d2189cddba8d3b23938
              name: 'OS: Size of swap space used: {#NAME}'
              type: DEPENDENT
              key: 'custom.proc.swap[{#NAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: B
              description: 'Size of swap space used {#NAME}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $..swap.first()
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'custom.proc.get[{#NAME}]'
              tags:
                -
                  tag: component
                  value: memory
            -
              uuid: a7265ca1b1d2463294e26d80fe075639
              name: 'OS: Number of threads: {#NAME}'
              type: DEPENDENT
              key: 'custom.proc.thread[{#NAME}]'
              delay: '0'
              history: 7d
              description: 'Number threads {#NAME}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $..threads.first()
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'custom.proc.get[{#NAME}]'
              tags:
                -
                  tag: component
                  value: system
            -
              uuid: c1b9b1d8f28947589e46041690899100
              name: 'OS: Summary of virtual memory size: {#NAME}'
              type: DEPENDENT
              key: 'custom.proc.vmem[{#NAME}]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: B
              description: 'Summary virtual memory used by process {#NAME} in bytes.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $..vsize.first()
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'custom.proc.get[{#NAME}]'
              tags:
                -
                  tag: component
                  value: memory
          master_item:
            key: 'proc.get[,,,summary]'
          lld_macro_paths:
            -
              lld_macro: '{#NAME}'
              path: $.name
            -
              lld_macro: '{#VMEM}'
              path: $.vsize
      tags:
        -
          tag: class
          value: service
        -
          tag: target
          value: process
      macros:
        -
          macro: '{$PROC.SUM.NAME.MATCHES}'
          value: '<CHANGE VALUE>'
          description: 'This macro is used in summary process discovery. Can be overridden on the host or linked template level.'
        -
          macro: '{$PROC.SUM.NAME.NOT_MATCHES}'
          value: '<CHANGE VALUE>'
          description: 'This macro is used in summary process discovery. Can be overridden on the host or linked template level.'
